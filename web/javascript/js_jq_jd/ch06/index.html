<!DOCTYPE html>
<html>
 <head>
  <title>Chapter 06</title>
 </head>
 <body>
  <input type="text" id="username">
  <div id="feedback"></div>
  <input type="text" id="message">
  <div id="lastkey"></div>
  <div id="cahractersLeft"></div>
  <script>
   var elUsername = document.getElementById('username');
   var elMsg = document.getElementById('feedback');

   function checkUsername(e,minLength) {
    if (elUsername.value.length < minLength) {
     elMsg.textContent = 'Username must be ' + minLength + ' characters or more ' + e.type;
    } else {
     elMsg.textContent = '';
    }
   }
   
   //elUsername.onblur = checkUsername;
   elUsername.addEventListener('blur',function(e){checkUsername(e,5);},false);
   
   //using event listener with the event object
   function checkLength(e,minLength){
    var el, elMsg;
    if(!e) {
     e = window.event;
    }
    el = e.target || e.srcElement;
    elMsg = el.nextSibling;

    if (el.value.length < minLength) {
     elMsg.innerHTML = 'Username must be ' + minLength + ' characters or more';
    } else {
     elMsg.innerHTML = '';
    }
   }

   var elUsername = document.getElementById('username');
   if (elUsername.addEventListener) {
    elUsername.addEventListener('blur',function(e){
     checkUsername(e,5);
    },false);
   } else {
    elUsername.attachEvent('onblur',function(e){
     checkUsername(e,5);
    });
   }

   function setup(){
    var textInput;
    textInput = document.getElementById('username');
    textInput.focus();
   }

   window.addEventListener('load',setup,false);
   
   var el2;
   
   function charCount(e){
    var textEntered, charDisplay, counter, lastKey;
    textEntered = document.getElementById('message').value;
    charDisplay = document.getElementById('cahractersLeft');
    counter = (180 - (textEntered.length));
    charDisplay.textContent = counter;

    lastkey = document.getElementById('lastkey');
    lastkey.textContent = 'Last key in ASCII code: ' + e.keyCode;
   }
   el2 = document.getElementById('message');
   el2.addEventListener('keypress',charCount,false);

  </script>
 </body>
</html>
